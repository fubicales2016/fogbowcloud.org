<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fogbow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://www.fogbowcloud.org/theme/css/bootstrap.css">
    
    <link rel="apple-touch-icon" sizes="57x57" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-32x32.png" sizes="32x32">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="http://www.fogbowcloud.org/theme/img/icons/mstile-144x144.png">
  </head>
  <body>
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="../" class="navbar-brand"></a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <ul id="navbar-main" class="nav navbar-nav navbar-right">
          <li class="active">
            <a href="http://www.fogbowcloud.org/rational.html">Understand it</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/install-general.html">Install it</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/fogbow-cli.html">Use it</a>
          </li>
          <li><a href="http://www.fogbowcloud.org/contact.html">Contact us</a></li>
        </ul>
      </div>
    </div>
     <div class="container">
      <div class="bs-docs-section">
    <div class="bs-docs-section">
    <div class="row">
      <div class="col-lg-4">
      	<br>
        <ul class="nav nav-pills nav-stacked" style="max-width: 300px;">
            <li >
            	<a href="rational">Rational</a>
            </li>
            <li >
            	<a href="architecture">General architecture</a>
            </li>
            <li class="active">
            	<a href="rendezvous">The rendezvous service</a>
            </li>
            <li >
            	<a href="manager">The fogbow manager</a>
            </li>
            <li >
            	<a href="opportunism">Opportunism</a>
            </li>
            <li >
            	<a href="green">Greenness</a>
            </li>
        </ul>
      </div>
      <div class="col-lg-8 page-content">
      	<h1>The rendezvous service</h1>
<p>The rendezvous service provides a directory for the private clouds that are member of a particular fowbow federation. It allows members to find each other by providing a complete status of the federation. </p>
<h2>Service architecture</h2>
<p>Currently, the rendezvous service provides two methods to the members of a federation: IamAlive and WhoIsAlive.</p>
<p>The first one allows a federation member to report resource information. In this sense, the rendezvous service will periodically receive information from every federation manager, which will also work as a heartbeat, and tag this information with a timestamp. This data is valid for a given expiration interval, which is configurable. After this timeout, data is considered expired and this member will no longer show up as an active member of the federation.</p>
<p>The WhoIsAlive method allows a federation member to ask for the set of active federation members. The rendezvous service will then return resource information about all currently active members.</p>
<p>Also, more than one instance of a rendezvous service can be active to tolerate faults. A rendezvous service instance communicates with other known rendezvous service replicas to synchronize their states. The synchronization is made through a WhoIsAliveSync method. This method sends a message to each of the replicas currently known by a rendezvous service instance asking for the known neighbors, i.e. replicas of the rendezvous service, and the known active members of the federation. The responses received are merged with the information that was previously known.</p>
<p>The rendezvous' response protocols use Result Set Management http://xmpp.org/extensions/xep-0059.html to limit the size of their response. Each user can specify how many items should come in response to a whoIsAlive or whoIsAliveSync call. Each rendezvous has a hard-coded maximum number of items that could come in response, currently, that number is 100. Even if the user defines a maximum number larger or not define a number at all, the response will not be longer than the hard-coded constant. The user can also page fowards, which means asking for a response starting from a specific item. </p>
<p>All communication is done via XMPP according to the service protocol.</p>
<h2>Service protocol</h2>
<h3>IAmAlive</h3>
<h4>Request</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/iamalive&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;status&gt;</span>
         <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
         <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
         <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
         <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
   <span class="nt">&lt;/query&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h4>Response</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;result&quot;</span><span class="nt">/&gt;</span>
</pre></div>


<hr />
<h3>WhoIsAlive</h3>
<h4>Request</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/whoisalive&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h4>Response</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;result&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/whoisalive&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&quot;federated-cloud-id1&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;status&gt;</span>
            <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
            <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
            <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
            <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
            <span class="nt">&lt;updated&gt;</span>value<span class="nt">&lt;/updated&gt;</span>  
         <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
      .
      .
      .
      <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&quot;federated-cloud-idn&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;status&gt;</span>
            <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
            <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
            <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
            <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
            <span class="nt">&lt;updated&gt;</span>value<span class="nt">&lt;/updated&gt;</span>  
         <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
   <span class="nt">&lt;/query&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h3>WhoIsAliveSync</h3>
<h4>Request</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/synch/whoisalive&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h4>Response</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;result&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/synch/whoisalive&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;neighbors&gt;</span>
        <span class="nt">&lt;neighbor&gt;</span> id <span class="nt">&lt;/neighbor&gt;</span>
        .
        .
        .
        <span class="nt">&lt;neighbor&gt;</span> id <span class="nt">&lt;/neighbor&gt;</span>
      <span class="nt">&lt;/neighbors&gt;</span>
      <span class="nt">&lt;managers&gt;</span>
         <span class="nt">&lt;manager</span> <span class="na">id =</span> <span class="s">&quot;federated-cloud-id1&quot;</span> <span class="nt">&gt;</span>
               <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
               <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
               <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
               <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
               <span class="nt">&lt;updated&gt;</span>value<span class="nt">&lt;/updated&gt;</span>  
            <span class="nt">&lt;/status&gt;</span>
         <span class="nt">&lt;/manager&gt;</span>
         .
         .
         .
         <span class="nt">&lt;mananger</span> <span class="na">id=</span><span class="s">&quot;federated-cloud-idn&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;status&gt;</span>
               <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
               <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
               <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
               <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
               <span class="nt">&lt;updated&gt;</span>value<span class="nt">&lt;/updated&gt;</span>  
            <span class="nt">&lt;/status&gt;</span>
         <span class="nt">&lt;/manager&gt;</span>
      <span class="nt">&lt;/managers&gt;</span>
   <span class="nt">&lt;/query&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h3>Pagination</h3>
<h4>WhoIsAlive using RSM</h4>
<h5>Request</h5>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/whoisalive&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;set</span> <span class="na">xmlns=</span><span class="s">&quot;http://jabber.org/protocol/rsm&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;max&gt;</span> maximum <span class="nt">&lt;/max&gt;</span>
         <span class="nt">&lt;after&gt;</span> after <span class="nt">&lt;/after&gt;</span>
      <span class="nt">&lt;/set&gt;</span>
   <span class="nt">&lt;/query&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h5>Response</h5>
<div class="highlight"><pre>iq type=&quot;result&quot;&gt;
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/whoisalive&quot;</span><span class="nt">&gt;</span>
      .
      .
      .
   <span class="nt">&lt;/query&gt;</span>
   <span class="nt">&lt;set&gt;</span>
      <span class="nt">&lt;first&gt;</span> first <span class="nt">&lt;/first&gt;</span>
      <span class="nt">&lt;last&gt;</span> last <span class="nt">&lt;/last&gt;</span>
      <span class="nt">&lt;count&gt;</span> count <span class="nt">&lt;/count&gt;</span>
   <span class="nt">&lt;/set&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h4>WhoIsAliveSync using RSM</h4>
<p>The protocol used is basically the same as the one for WhoIsAlive. As it could be necessary to apply RSM for both managers response items and neighbors response items, the <code>&lt;query&gt;</code> tag should be followed by <code>&lt;neighbors&gt;</code>  and/or <code>&lt;managers&gt;</code> tags, and inside those is where the <code>&lt;set&gt;</code> tag and whatever is inside it should be.</p>
<p>Obs: the updated value is the timestamp of the information; it is formatted according to the ISO 8601 standard. </p>
      </div>
    </div>
    </div>
      </div>
    </div>
    
    <footer class="footer">
      <div class="container">
        <div class="row">
      	  <div class="col-lg-12">
      	    <ul class="list-inline">
      	      <li class="pull-right"><a href="#top">Back to top</a></li>
      	      <li><a href="http://blog.fogbowcloud.org"target="_blank">Blog</a></li>
      	      <li><a href="https://github.com/fogbow/" target="_blank">GitHub</a></li>
      	      <li><a href="http://build.fogbowcloud.org" target="_blank">Build status</a></li>
      	    </ul>
      	    <p>Code released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache License Version 2.0</a>.</p>
      	    <p>Based on <a href="http://getbootstrap.com" target="_blank" rel="nofollow">Bootstrap</a>. Icons from <a href="http://fortawesome.github.io/Font-Awesome/" target="_blank" rel="nofollow">Font Awesome</a>. Web fonts from <a href="http://www.google.com/webfonts" target="_blank" rel="nofollow">Google</a>.</p>
      	  </div>
        </div>
      </div>

    </footer>

    <footer class="below-footer">
      <div class="container">
      <div class="row">

      <div class="col-lg-4">
          <a href="http://ec.europa.eu/index_en.htm" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/eu.jpg"></a>
          <a href="http://www.mcti.gov.br/" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/fin_min_ciencia.png"></a>
          <a href="http://www.cnpq.br/" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/cnpq.png"></a>
          <a href="http://www.finep.gov.br/" target="_blank" rel="nofollow"><img src="http://www.finep.gov.br/imagens/logo_novo.jpg" height="28"></a>
      </div>

      <div class="col-lg-8">
        <p>
          Fogbow is partially funded by CNPq/Brazil and the European Commission through the <a href="http://www.eubrazilcloudconnect.eu" target="_blank" rel="nofollow">EUBrazilCC</a> project, and by FINEP/Brazil through the <a href="http://www.lncc.br/departamentos/projetosconsultar.php?vMenu=&Idt_Projeto=587&projeto=3&vCabecalho=pesq&vTitulo=lncc&vDepto=&idt_responsavel=&vAno=2014&idt_linha_pesquisa=" target="_blank" rel="nofollow">CICN</a> project.
        </p>
      </div>

      </div>
    </div>
    </footer>



  </body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-63282618-1', 'auto');
    ga('send', 'pageview');
  </script>
</html>