<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fogbow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://www.fogbowcloud.org/theme/css/bootstrap.css">
    <link rel="stylesheet" href="http://www.fogbowcloud.org/theme/css/font-awesome.min.css">
    
    <link rel="apple-touch-icon" sizes="57x57" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-32x32.png" sizes="32x32">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="http://www.fogbowcloud.org/theme/img/icons/mstile-144x144.png">
   </head>
  <body>
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="../" class="navbar-brand"></a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <ul id="navbar-main" class="nav navbar-nav navbar-right">
          <li >
            <a href="http://www.fogbowcloud.org/rational.html">Understand it</a>
          </li>
          <li class="active">
            <a href="http://www.fogbowcloud.org/install-general.html">Install it</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/use-intro.html">Use it</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/stories.html">Success stories</a>
          </li>
          <li><a href="https://github.com/fogbow/" target="_blank">Contribute to it</a></li>
          <li><a href="http://www.fogbowcloud.org/contact.html">Contact us</a></li>
        </ul>
      </div>
    </div>
     <div class="container">
      <div class="bs-docs-section">
    <div class="bs-docs-section">
    <div class="row">
      <div class="col-lg-4">
      	<br>
        <ul class="nav nav-pills nav-stacked" style="max-width: 300px;">
            <li >
            	<a href="the-big-picture">The Big Picture</a>
            </li>
            <li >
            	<a href="install-configure-xmpp">Install and configure XMPP</a>
            </li>
            <li class="active">
            	<a href="install-configure-reverse-tunnel">Install and configure Fogbow Reverse Tunnel</a>
            </li>
            <li >
            	<a href="install-configure-fogbow-manager">Install and configure fogbow manager</a>
            </li>
            <li >
            	<a href="install-configure-rendezvous">Install and configure fogbow rendezvous</a>
            </li>
            <li >
            	<a href="intall-configure-fogbow-cli">Install and configure Fogbow CLI</a>
            </li>
            <li >
            	<a href="install-configure-fogbow-dashboard">Install and configure Fogbow Dashboard</a>
            </li>
        </ul>
      </div>
      <div class="col-lg-8 page-content">
      	<h1>Install and configure the Fogbow Reverse Tunnel</h1>
<p>The reverse tunneling service provides public IP access to virtual machines created in the private cloud, even if the local cloud offers only private IPs to these virtual machines. The Fogbow Reverse Tunnel is distributed in two forms: as source code or as a binary package for debian-based distributions. Choose the best distribution for your system, download it and install it as follow</p>
<h2>Install from source</h2>
<p>To get the lastest stable version of the component, download it from our repository</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="n">https</span><span class="o">:</span><span class="c1">//github.com/fogbow/fogbow-reverse-tunnel/archive/master.zip</span>
</pre></div>


<p>Then, decompress it:</p>
<div class="highlight"><pre><span class="n">unzip</span> <span class="n">master</span><span class="p">.</span><span class="n">zip</span>
</pre></div>


<p>Now, install it with Maven:</p>
<div class="highlight"><pre><span class="n">cd</span> <span class="n">fogbow</span><span class="o">-</span><span class="n">reverse</span><span class="o">-</span><span class="n">tunnel</span><span class="o">-</span><span class="n">master</span>
<span class="n">mvn</span> <span class="n">install</span>
</pre></div>


<h2>Install from debian package</h2>
<p>Download a stable version from our <a href="http://downloads.fogbowcloud.org/stable/debian/">package repository</a> and install it with dpkg:</p>
<div class="highlight"><pre>dpkg -i fogbow-reverse-tunnel_<span class="nv">$version</span>.deb
</pre></div>


<h2>Configure</h2>
<p>After the installation, rename the file <code>reverse-tunnel.conf.example</code> to <code>reverse-tunnel.conf</code> and edit its contents:</p>
<div class="highlight"><pre><span class="c"># Port to run the HTTP service of the Reverse Tunnel.</span>
<span class="c"># The HTTP service handles request to create and get tunneled ports.</span>
<span class="nv">http_port</span><span class="o">=</span>2223

<span class="c"># The reverse tunnel service employs multiple tunnel servers to balance the service load.</span>
<span class="c"># The service allocates one port to each server.</span>
<span class="c"># The tunnel_port_range property defines the range of servers&#39; ports, thus the number of servers.</span>
<span class="nv">tunnel_port_range</span><span class="o">=</span>2224:4224

<span class="c"># Number of ssh ports to be allocated in each server.</span>
<span class="nv">ports_per_ssh_server</span><span class="o">=</span>5

<span class="c"># The range of public tunneled ports.</span>
<span class="nv">external_port_range</span><span class="o">=</span>20000:30000

<span class="c"># Path to ssh key to be generated by the SSH Server.</span>
<span class="nv">host_key_path</span><span class="o">=</span>hostkey.ser

<span class="c"># Expiration time to a tunnel port token</span>
<span class="c"># A token is associated with a created tunneled port.</span>
<span class="c"># The token expires after not been used for idle_token_timeout seconds.</span>
<span class="c"># After expiration, the port is reclaimed and can be used by another request.</span>
<span class="nv">idle_token_timeout</span><span class="o">=</span>86400

<span class="c"># Period interval in seconds to verify token expiration</span>
<span class="nv">check_ssh_servers_interval</span><span class="o">=</span>120
</pre></div>


<h2>Run</h2>
<p>To start the reverse tunnel server, run the start-tunnel-server script inside <code>./bin</code>.</p>
<div class="highlight"><pre><span class="p">.</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">start</span><span class="o">-</span><span class="n">tunnel</span><span class="o">-</span><span class="n">server</span>
</pre></div>
      </div>
    </div>
    </div>
      </div>
    </div>
    
    <footer class="footer">
      <div class="container">
        <div class="row">
      	  <div class="col-lg-12">
      	    <ul class="list-inline">
      	      <li class="pull-right"><a href="#top">Back to top</a></li>
      	      <li><a href="https://github.com/fogbow/" target="_blank">GitHub</a></li>
      	      <li><a href="http://build.fogbowcloud.org" target="_blank">Build status</a></li>
      	    </ul>
      	    <p>Code released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache License Version 2.0</a>.</p>
      	    <p>Based on <a href="http://getbootstrap.com" target="_blank" rel="nofollow">Bootstrap</a>. Icons from <a href="http://fortawesome.github.io/Font-Awesome/" target="_blank" rel="nofollow">Font Awesome</a>. Web fonts from <a href="http://www.google.com/webfonts" target="_blank" rel="nofollow">Google</a>.</p>
      	  </div>
        </div>
      </div>

    </footer>

    <footer class="below-footer">
      <div class="container">
      <div class="row">

      <div class="col-lg-4">
          <a href="http://ec.europa.eu/index_en.htm" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/eu.jpg"></a>
          <a href="http://www.mcti.gov.br/" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/fin_min_ciencia.png"></a>
          <a href="http://www.cnpq.br/" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/cnpq.png"></a>
          <a href="http://www.finep.gov.br/" target="_blank" rel="nofollow"><img src="http://www.fogbowcloud.org/theme/img/logos/finep_marca_RGB.jpg" height="28"></a>
      </div>

      <div class="col-lg-8">
        <p>
          Fogbow is partially funded by CNPq/Brazil and the European Commission through the <a href="http://www.eubrazilcloudconnect.eu" target="_blank" rel="nofollow">EUBrazilCC</a> project, and by FINEP/Brazil through the <a href="http://www.lncc.br/departamentos/projetosconsultar.php?vMenu=&Idt_Projeto=587&projeto=3&vCabecalho=pesq&vTitulo=lncc&vDepto=&idt_responsavel=&vAno=2014&idt_linha_pesquisa=" target="_blank" rel="nofollow">CICN</a> project.
        </p>
      </div>

      </div>
    </div>
    </footer>



  </body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-63282618-1', 'auto');
    ga('send', 'pageview');
  </script>
</html>