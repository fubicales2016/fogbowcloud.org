<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fogbow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://www.fogbowcloud.org/theme/css/bootstrap.css">
    <link rel="stylesheet" href="http://www.fogbowcloud.org/theme/css/font-awesome.min.css">
    
    <link rel="apple-touch-icon" sizes="57x57" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="http://www.fogbowcloud.org/theme/img/icons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="http://www.fogbowcloud.org/theme/img/icons/favicon-32x32.png" sizes="32x32">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="http://www.fogbowcloud.org/theme/img/icons/mstile-144x144.png">
   </head>
  <body>
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="../" class="navbar-brand"></a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <ul id="navbar-main" class="nav navbar-nav navbar-right">
          <li >
            <a href="http://www.fogbowcloud.org/rational.html">Understand it</a>
          </li>
          <li class="active">
            <a href="http://www.fogbowcloud.org/install-general.html">Install it</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/use-intro.html">Use it</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/stories.html">Success stories</a>
          </li>
          <li><a href="https://github.com/fogbow/" target="_blank">Contribute to it</a></li>
          <li><a href="http://www.fogbowcloud.org/contact.html">Contact us</a></li>
        </ul>
      </div>
    </div>
     <div class="container">
      <div class="bs-docs-section">
    <div class="bs-docs-section">
    <div class="row">
      <div class="col-lg-4">
      	<br>
        <ul class="nav nav-pills nav-stacked" style="max-width: 300px;">
            <li >
            	<a href="install-general">Get started</a>
            </li>
            <li >
            	<a href="install-configure-reverse-tunnel">Install and configure fogbow reverse tunnel</a>
            </li>
            <li >
            	<a href="install-configure-xmpp">Install and configure XMPP</a>
            </li>
            <li class="active">
            	<a href="install-manager">Manager</a>
            </li>
            <li >
            	<a href="install-rendezvous">Rendezvous</a>
            </li>
            <li >
            	<a href="install-configure-fogbow-manager">Install and configure fogbow manager</a>
            </li>
            <li >
            	<a href="install-opportunism">Opportunism</a>
            </li>
            <li >
            	<a href="install-green">Greeness</a>
            </li>
        </ul>
      </div>
      <div class="col-lg-8 page-content">
      	<h1>Manager</h1>
<p>The manager is the fogbow's component that runs in each federation member. It provides a OCCI API for end users and interacts with the rendezvous and other managers. </p>
<p>This tutorial assumes you have Openstack's OCCI API enabled in your underlying cloud setup. Please read the <a href="https://wiki.openstack.org/wiki/Occi#How_to_use_the_OCCI_interface" target=_blank>Openstack's OCCI guide</a> to know more.</p>
<p>Also, the manager needs a user registered in the underlying private cloud in order to proxy remote requests to its local resources. For Openstack, you can add new users and projects as is described in the <a href="http://docs.openstack.org/trunk/openstack-ops/content/projects_users.html#create_new_users" target=_blank>Openstack Ops guide</a>. The configuration section of this page explains it in more detail.</p>
<h2>Install from source</h2>
<p>As the manger runs as an XMPP component, you need an XMPP server running and properly configured.
We recommend <a href="https://prosody.im/" target=_blank>prosody 0.9.8+</a> due to its ease of configuration.</p>
<p>If you are using Prosody, you can add a component to its configuration with:</p>
<div class="highlight"><pre><span class="n">Component</span> <span class="s">&quot;manager.test.com&quot;</span>
       <span class="n">component_secret</span> <span class="o">=</span> <span class="s">&quot;password&quot;</span>
</pre></div>


<p>After add the component to your XMPP server, you need to add a new entry in your DNS to resolve your component name to a IP address like in example below. It is needed for all XMPP components such as rendezvous and Fogbow manager.</p>
<div class="highlight"><pre><span class="n">manager</span><span class="p">.</span><span class="n">test</span><span class="p">.</span><span class="n">com</span><span class="p">.</span>        <span class="mi">22</span>      <span class="n">IN</span>      <span class="n">A</span>       <span class="mf">199.27.76.133</span>
</pre></div>


<p>With an XMPP server already installed and configured, get the latest code of the project.</p>
<div class="highlight"><pre>git clone https://github.com/fogbow/fogbow-manager.git
</pre></div>


<p>Then, install it with Maven</p>
<div class="highlight"><pre>mvn install
</pre></div>


<h2>Install from debian package</h2>
<p>To set up a manager instance, first, download to the <a href="http://downloads.fogbowcloud.org/stable/debian/v0.2.2/fogbow-manager/fogbow-manager_v0.2.2.deb">latest debian package</a></p>
<div class="highlight"><pre>wget http://downloads.fogbowcloud.org/stable/debian/v0.2.2/fogbow-manager/fogbow-manager_v0.2.2.deb
</pre></div>


<p>Then, install it with dkpg</p>
<div class="highlight"><pre>dpkg -i fogbow-manager_v0.2.2.deb 
</pre></div>


<h2>Configure</h2>
<p>After the installation, move the file <code>manager.conf.example</code> to <code>manager.conf</code> and edit its contents:</p>
<ul>
<li><strong>XMPP properties:</strong> Manager and Rendezvous XMPP properties that will be used for the comunication between components. These components are XMPP components and need to be added to the XMPP configuration in the components section, as mentioned in the "Install from source" section.</li>
</ul>
<div class="highlight"><pre><span class="c"># jid of your Manager Component</span>
<span class="c"># Example:</span>
<span class="nv">xmpp_jid</span><span class="o">=</span>manager.test.com

<span class="c"># Component password</span>
<span class="c"># Example:</span>
<span class="nv">xmpp_password</span><span class="o">=</span>password

<span class="c"># IP address.</span>
<span class="c"># Example:</span>
<span class="nv">xmpp_host</span><span class="o">=</span>127.0.0.1

<span class="c"># Port in which the server will be listening.</span>
<span class="c"># Example:</span>
<span class="nv">xmpp_port</span><span class="o">=</span>5347

<span class="c"># jid of your Rendezvous Component</span>
<span class="c"># Example:</span>
<span class="nv">rendezvous_jid</span><span class="o">=</span>rendezvous.test.com
</pre></div>


<ul>
<li>
<p><strong>Cloud Compute Information:</strong> All compute information required by the compute plugins that will be used. You can see the required information by each compute plugin provided by fogbow at <a href="http://www.fogbowcloud.org/install-plugins">Plugins Page</a>.</p>
</li>
<li>
<p><strong>Cloud Identity Information:</strong> All identity information required by the identity plugin that will be used. You can see the required information by each identity plugin provided by fogbow at <a href="http://www.fogbowcloud.org/install-plugins">Plugins Page</a>.</p>
</li>
<li>
<p><strong>Cloud Authorization Information:</strong> Cloud authorization is used to get the authorization in the federation.  You can see the required information by each authorization plugin provided by fogbow at <a href="http://www.fogbowcloud.org/install-plugins">Plugins Page</a>.</p>
</li>
<li>
<p><strong>Local User Information:</strong> Cloud local user is a local cloud user that will submit requests from remote members.</p>
</li>
</ul>
<div class="highlight"><pre><span class="c"># Local user name</span>
<span class="c"># Example:</span>
<span class="nv">local_proxy_account_user_name</span><span class="o">=</span>fogbow

<span class="c"># Local user password</span>
<span class="c"># Example:</span>
<span class="nv">local_proxy_account_password</span><span class="o">=</span>fogbow

<span class="c"># Local user tenant (project) name</span>
<span class="c"># Example:</span>
<span class="nv">local_proxy_account_tenant_name</span><span class="o">=</span>demo
</pre></div>


<ul>
<li><strong>Validator Member Information:</strong> Validator member is used to define if the manager can receive or donate to another one. It is possible different implementations for it, and each implementation can require specific properties (as identity and compute plugins). This section shows properties required by the default member validator (all members can receive and donate resources to each other).</li>
</ul>
<div class="highlight"><pre><span class="c"># Member validator class</span>
<span class="c"># Example:</span>
<span class="nv">member_validator</span><span class="o">=</span>org.fogbowcloud.manager.core.DefaultMemberValidator

<span class="c"># Member certificates authorities path</span>
<span class="c"># Example</span>
<span class="nv">member_validator_ca_dir</span><span class="o">=</span>

<span class="c"># Member certificate file contains the certificate the should be used by the manager </span>
<span class="c"># Example:</span>
<span class="nv">cert_path</span><span class="o">=</span>path/certificate/file
</pre></div>


<ul>
<li><strong>Intervals:</strong> Properties related to scheduling, token update and instance monitoring.</li>
</ul>
<div class="highlight"><pre><span class="c"># Scheduler period is the interval of time that the Manager Component will periodicaly submit requests that are not fulfilled yet</span>
<span class="c"># Uses miliseconds unit</span>
<span class="c"># Example:</span>
<span class="nv">scheduler_period</span><span class="o">=</span>30000

<span class="c"># Token update period is the interval of time that the Manager Component will check if it is needed to get new token for requests and get it if yes</span>
<span class="c"># Uses miliseconds unit</span>
<span class="c"># Example:</span>
<span class="nv">token_update_period</span><span class="o">=</span>300000

<span class="c"># Instance monitoring period is the interval of time that the Manager Component will check if the request&#39;s instance still exists. If not, the manager will update request state according to request&#39;s attributes</span>
<span class="c"># Uses miliseconds unit</span>
<span class="c"># Example:</span>
<span class="nv">instance_monitoring_period</span><span class="o">=</span>120000
</pre></div>


<ul>
<li><strong>SSH Tunnel Properties:</strong> SSH properties are used to provide connectivity to instances.</li>
</ul>
<div class="highlight"><pre><span class="c"># Public IP address of shh tunnel host</span>
<span class="c"># Example:</span>
<span class="nv">ssh_tunnel_public_host</span><span class="o">=</span>150.160.0.10

<span class="c"># Private IP address of shh tunnel host</span>
<span class="c"># Example:</span>
<span class="nv">ssh_tunnel_private_host</span><span class="o">=</span>10.0.0.1

<span class="c"># shh tunnel host port defines the port to be used when doing ssh. If this property isn&#39;t set, the default value is 2222</span>
<span class="c"># Example:</span>
<span class="nv">ssh_tunnel_host_port</span><span class="o">=</span>2222

<span class="c"># shh tunnel host http port defines the port to be used when doing comunication with que ssh tunnel host</span>
<span class="c"># Example:</span>
<span class="nv">ssh_tunnel_host_http_port</span><span class="o">=</span>2223
</pre></div>


<ul>
<li><strong>Manager HTTP Port:</strong> HTTP port to which the manager component endpoint will be listening. In order to add the manager to federation and make it available from outside the local network, add the manager http port to your firewall.</li>
</ul>
<div class="highlight"><pre><span class="c"># http port is the Manager Component endpoint port</span>
<span class="c"># Example:</span>
<span class="nv">http_port</span> <span class="o">=</span> 8182
</pre></div>


<ul>
<li><strong>Image configuration:</strong> Image to be used with instances created via manager. The image used need to have cloud init in order to be able to set machine configuration such as network, credential keys and machine name.</li>
</ul>
<h2>Run</h2>
<p>To start the manager component, run the start-manager script inside <code>bin</code>.</p>
<div class="highlight"><pre>./bin/start-manager
</pre></div>
      </div>
    </div>
    </div>
      </div>
    </div>
    
    <footer class="footer">
      <div class="container">
        <div class="row">
      	  <div class="col-lg-12">
      	    <ul class="list-inline">
      	      <li class="pull-right"><a href="#top">Back to top</a></li>
      	      <li><a href="https://github.com/fogbow/" target="_blank">GitHub</a></li>
      	      <li><a href="http://build.fogbowcloud.org" target="_blank">Build status</a></li>
      	    </ul>
      	    <p>Code released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache License Version 2.0</a>.</p>
      	    <p>Based on <a href="http://getbootstrap.com" target="_blank" rel="nofollow">Bootstrap</a>. Icons from <a href="http://fortawesome.github.io/Font-Awesome/" target="_blank" rel="nofollow">Font Awesome</a>. Web fonts from <a href="http://www.google.com/webfonts" target="_blank" rel="nofollow">Google</a>.</p>
      	  </div>
        </div>
      </div>

    </footer>

    <footer class="below-footer">
      <div class="container">
      <div class="row">

      <div class="col-lg-4">
          <a href="http://ec.europa.eu/index_en.htm" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/eu.jpg"></a>
          <a href="http://www.mcti.gov.br/" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/fin_min_ciencia.png"></a>
          <a href="http://www.cnpq.br/" target="_blank" rel="nofollow"><img src="http://www.eubrazilcloudconnect.eu/sites/default/files/cnpq.png"></a>
          <a href="http://www.finep.gov.br/" target="_blank" rel="nofollow"><img src="http://www.fogbowcloud.org/theme/img/logos/finep_marca_RGB.jpg" height="28"></a>
      </div>

      <div class="col-lg-8">
        <p>
          Fogbow is partially funded by CNPq/Brazil and the European Commission through the <a href="http://www.eubrazilcloudconnect.eu" target="_blank" rel="nofollow">EUBrazilCC</a> project, and by FINEP/Brazil through the <a href="http://www.lncc.br/departamentos/projetosconsultar.php?vMenu=&Idt_Projeto=587&projeto=3&vCabecalho=pesq&vTitulo=lncc&vDepto=&idt_responsavel=&vAno=2014&idt_linha_pesquisa=" target="_blank" rel="nofollow">CICN</a> project.
        </p>
      </div>

      </div>
    </div>
    </footer>



  </body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-63282618-1', 'auto');
    ga('send', 'pageview');
  </script>
</html>